#!/usr/bin/python
import os, commands, csv, subprocess

MAC=subprocess.check_output("esxcli network ip interface list |grep MAC | awk '{print $3}'",shell=True)

# MAC=os.system("esxcli network ip interface list |grep MAC | awk '{print $3}'")
os.system("wget -O ListOfHosts.csv http://192.168.10.3/ListOfHosts.csv")

print "Hardware MAC is "
print MAC
#print "ALL INT details "
#MACLINE=os.system("esxcli network ip interface list |grep MAC")
#MACLINE2=str(MACLINE)
#print MACLINE2
# print MACLINE.split(" ")[3]

#mystring="this is a test"
#print mystring.split()[2]

i=123
print type(i)
x="mystring"
print type(x)

print type(MAC)

with open('ListOfHosts.csv', 'rb') as f:
        reader = csv.reader(f)
        for row in reader:
                print MAC + row[1]
                print type(row[1])
                if MAC == row[1]:
                        print "MATCHED"
                        print row[0]
                        #os.system("esxcli system hostname set --fqdn=" + row[1])
                        os.system("esxcli system hostname set --fqdn=" + row[0])
print "End"
print "Hostname is: "
os.system("esxcli system hostname get")

#print "Here is the MACLINE"
#print MACLINE

print MAC
